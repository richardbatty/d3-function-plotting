<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div id="graph"></div>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="../lib/plotter.js" charset="utf-8"></script>
  <script src="../lib/components.js" charset="utf-8"></script>
  <script src="../lib/data.js" charset="utf-8"></script>
  <script src="../lib/attacher.js" charset="utf-8"></script>
  <script src="../lib/animator.js" charset="utf-8"></script>

  <script>
    function square(x) {
      return Math.pow(x, 2);
    }

    function derivativeOfSquare(x) {
      return 2 * x;
    }

    function linear(x) {
      return x;
    }

    function createTangent(func, derivative, touchPointX) {
        var touchPointY = func(touchPointX),
            gradient = derivative(touchPointX),
            yIntercept = touchPointY - (gradient * touchPointX);

      return function tangent(x) {
        return (gradient * x) + yIntercept;
      };
    }

    var dimensions = {
      margins: {
        top: 20,
        right: 20,
        bottom: 20,
        left: 80
      }
    };
    dimensions.width = 600 - dimensions.margins.left - dimensions.margins.right;
    dimensions.height = 600 - dimensions.margins.top - dimensions.margins.bottom;

    var chart = Plotter.xy()
        .type('cartesian')
        .xSpan([-10, 10])
        .ySpan([25, -10])
        .dimensions(dimensions)
        .funcs([square, createTangent(square, derivativeOfSquare, -5)])
        .axisNumbers(false);

    d3.select("#graph")
      .call(chart);


     Plotter.animator.increment(-5, 5, 1, 100, function(number) {
       chart.update(createTangent(square, derivativeOfSquare, number));
     });
  </script>
</body>
</html>
